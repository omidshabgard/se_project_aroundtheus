!function(){"use strict";const e="click",t="submit",r="keydown",o={container:".profile__info",title:".profile__title",description:".profile__description",editButton:".profile__edit-button",addButton:".profile__add-button"},n={list:"#gallery-list"},s={template:"#card-template",card:".card",image:".card__image",deleteButton:".card__delete-button",info:".card__info",title:".card__title",likeButton:".card__like-button"},i={profileEdit:{modal:"#profile-edit-modal",titleInput:"#profile-title-input",descriptionInput:"#profile-description-input",titleInputError:"#profile-title-input-error",descriptionInputError:"#profile-description-input-error"},cardAdd:{modal:"#card-add-modal",titleInputError:"#card-title-input-error",urlInputError:"#card-url-input-error"},image:{modal:"#image-modal",preview:".modal__image-preview",caption:".modal__caption"},close:".modal__close",form:".modal__form",input:".modal__input"},l={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},a=document.querySelector(i.profileEdit.modal),c=document.querySelector(o.editButton),u=document.querySelector(i.profileEdit.titleInput),d=document.querySelector(i.profileEdit.descriptionInput),m=(document.querySelector(o.title),document.querySelector(o.description),document.querySelector(i.cardAdd.modal)),_=document.querySelector(o.addButton),p=a.querySelector(i.form),h=m.querySelector(i.form);var E=class{constructor(e,t,r){this._name=e.name,this._url=e.url,this._cardSelector=t,this._handleImageClick=r}_handleImagePreview(){return this._handleImageClick(this._name,this._url)}_setEventListeners(){const t=this._cardElement.querySelector(s.likeButton);t.addEventListener(e,(()=>{this._handleLikeButton(t)})),this._cardElement.querySelector(s.deleteButton).addEventListener(e,(()=>{this._handleDeleteButton()})),this._cardElement.querySelector(s.image).addEventListener(e,(()=>this._handleImagePreview()))}getView(){this._cardElement=document.querySelector(this._cardSelector).content.querySelector(s.card).cloneNode(!0),this._cardElement.querySelector(s.title).textContent=this._name;const e=this._cardElement.querySelector(s.image);return e.src=this._url,e.alt=this._name,this._setEventListeners(),this._cardElement}_handleLikeButton(e){e.classList.toggle("card__like-button_active")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}},f=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e,t){const r=this._formElement.querySelector(`#${e.id}-error`);console.log("ðŸš€ ~ FormValidator ~ _showInputError ~ errorElement:",r),e.classList.add(this._inputErrorClass),r.textContent=t,r.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);console.log("ðŸš€ ~ FormValidator ~ _hideInputError ~ errorElement:",t),e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_checkInputValidity(e,t){const r=e.querySelector(`#${t.id}-error`);t.validity.valid?(t.classList.remove(this._inputErrorClass),r.textContent="",r.classList.remove(this._errorClass)):(t.classList.add(this._inputErrorClass),r.textContent=t.validationMessage,r.classList.add(this._errorClass))}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(this._formElement,e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener(t,(e=>{e.preventDefault(),this._toggleButtonState(),e.target.reset()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};class v{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeByEscapeButton=this._closeByEscapeButton.bind(this),this._popupCloseButon=this._popupElement.querySelector(i.close)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener(r,this._closeByEscapeButton)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener(r,this._closeByEscapeButton)}_closeByEscapeButton=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class g extends v{constructor(e,t){super({popupSelector:e}),this._formElement=this._popupElement.querySelector(i.form),this._formInputs=this._formElement.querySelectorAll(i.input),this._handleFormSubmit=t}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}_submitForm=e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)};setEventListeners(){super.setEventListeners(),this._formElement.addEventListener(t,this._submitForm)}}const S=new class{constructor(e){let{nameSelector:t,jobSelector:r}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:r}=e;this._nameElement.textContent=t,this._jobElement.textContent=r}}({nameSelector:o.title,jobSelector:o.description}),y=new class{constructor(e,t){let{items:r,renderer:o}=e;this._items=r,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=w(e);y.addItem(t)}},n.list);function L(e,t){q.open(e,t)}function w(e){return new E(e,s.template,L).getView()}y.renderItems();const I=new f(l,p),b=new g(i.profileEdit.modal,(function(e){const{name:t,about:r}=e;S.setUserInfo({name:t,job:r}),b.close()}));b.setEventListeners(),c.addEventListener(e,(function(){const{name:e,job:t}=S.getUserInfo();u.value=e,d.value=t,I.resetValidation(),b.open()})),I.enableValidation();const B=new f(l,h),C=new g(i.cardAdd.modal,(function(e){const{name:t,url:r}=e,o=w({name:t,url:r});y.addItem(o),C.close()}));C.setEventListeners(),_.addEventListener(e,(function(){B.resetValidation(),C.open()})),B.enableValidation();const q=new class extends v{constructor(e){super({popupSelector:e}),this._previewImageTitle=this._popupElement.querySelector(i.image.caption),this._previewImageModal=this._popupElement.querySelector(i.image.preview)}open(e,t){this._previewImageModal.src=t,this._previewImageModal.alt=e,this._previewImageTitle.textContent=e,super.open()}}(i.image.modal);q.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QmhELEVBQzNDdEUsV0FBQUEsQ0FBWXdFLEdBQ1hhLE1BQU0sQ0FBRWIsa0JBQ1JwRSxLQUFLMkgsbUJBQXFCM0gsS0FBS3FFLGNBQWNqRixjQUM1Q25DLEVBQWdCUyxNQUFNYSxTQUV2QnlCLEtBQUs0SCxtQkFBcUI1SCxLQUFLcUUsY0FBY2pGLGNBQzVDbkMsRUFBZ0JTLE1BQU1ZLFFBRXhCLENBRUFtRyxJQUFBQSxDQUFLbEcsRUFBUzBJLEdBQ2JqSCxLQUFLNEgsbUJBQW1CekcsSUFBTThGLEVBQzlCakgsS0FBSzRILG1CQUFtQnhHLElBQU03QyxFQUM5QnlCLEtBQUsySCxtQkFBbUIxRyxZQUFjMUMsRUFDdEMwRyxNQUFNUixNQUNQLEdINEYyQ3hILEVBQWdCUyxNQUFNSyxPQUNsRW1KLEVBQWlCckMsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29uc3RhbnRzL2FwcC1kYXRhLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3BvdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG5cdHtcblx0XHRuYW1lOiAnWW9zZW1pdGUgVmFsbGV5Jyxcblx0XHR1cmw6ICdodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZycsXG5cdH0sXG5cdHtcblx0XHRuYW1lOiAnTGFrZSBMb3Vpc2UnLFxuXHRcdHVybDogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnJyxcblx0fSxcblx0e1xuXHRcdG5hbWU6ICdCYWxkIE1vdW50YWlucycsXG5cdFx0dXJsOiAnaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGcnLFxuXHR9LFxuXHR7XG5cdFx0bmFtZTogJ0xhdGVtYXInLFxuXHRcdHVybDogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGcnLFxuXHR9LFxuXHR7XG5cdFx0bmFtZTogJ1Zhbm9pc2UgTmF0aW9uYWwgUGFyaycsXG5cdFx0dXJsOiAnaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZycsXG5cdH0sXG5cdHtcblx0XHRuYW1lOiAnTGFnbyBkaSBCcmFpZXMnLFxuXHRcdHVybDogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGcnLFxuXHR9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGV2ZW50VHlwZSA9IHtcblx0Q0xJQ0s6ICdjbGljaycsXG5cdFNVQk1JVDogJ3N1Ym1pdCcsXG5cdElOUFVUOiAnaW5wdXQnLFxuXHRLRVlfRE9XTjogJ2tleWRvd24nLFxuXHRNT1VTRV9ET1dOOiAnbW91c2Vkb3duJyxcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG5cdHByb2ZpbGU6IHtcblx0XHRjb250YWluZXI6ICcucHJvZmlsZV9faW5mbycsXG5cdFx0dGl0bGU6ICcucHJvZmlsZV9fdGl0bGUnLFxuXHRcdGRlc2NyaXB0aW9uOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyxcblx0XHRlZGl0QnV0dG9uOiAnLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyxcblx0XHRhZGRCdXR0b246ICcucHJvZmlsZV9fYWRkLWJ1dHRvbicsXG5cdH0sXG5cdGdhbGxlcnk6IHtcblx0XHRsaXN0OiAnI2dhbGxlcnktbGlzdCcsXG5cdH0sXG5cdGNhcmRUZW1wbGF0ZToge1xuXHRcdHRlbXBsYXRlOiAnI2NhcmQtdGVtcGxhdGUnLFxuXHRcdGNhcmQ6ICcuY2FyZCcsXG5cdFx0aW1hZ2U6ICcuY2FyZF9faW1hZ2UnLFxuXHRcdGRlbGV0ZUJ1dHRvbjogJy5jYXJkX19kZWxldGUtYnV0dG9uJyxcblx0XHRpbmZvOiAnLmNhcmRfX2luZm8nLFxuXHRcdHRpdGxlOiAnLmNhcmRfX3RpdGxlJyxcblx0XHRsaWtlQnV0dG9uOiAnLmNhcmRfX2xpa2UtYnV0dG9uJyxcblx0fSxcblx0bW9kYWw6IHtcblx0XHRwcm9maWxlRWRpdDoge1xuXHRcdFx0bW9kYWw6ICcjcHJvZmlsZS1lZGl0LW1vZGFsJyxcblx0XHRcdHRpdGxlSW5wdXQ6ICcjcHJvZmlsZS10aXRsZS1pbnB1dCcsXG5cdFx0XHRkZXNjcmlwdGlvbklucHV0OiAnI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXQnLFxuXHRcdFx0dGl0bGVJbnB1dEVycm9yOiAnI3Byb2ZpbGUtdGl0bGUtaW5wdXQtZXJyb3InLFxuXHRcdFx0ZGVzY3JpcHRpb25JbnB1dEVycm9yOiAnI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXQtZXJyb3InLFxuXHRcdH0sXG5cdFx0Y2FyZEFkZDoge1xuXHRcdFx0bW9kYWw6ICcjY2FyZC1hZGQtbW9kYWwnLFxuXHRcdFx0dGl0bGVJbnB1dEVycm9yOiAnI2NhcmQtdGl0bGUtaW5wdXQtZXJyb3InLFxuXHRcdFx0dXJsSW5wdXRFcnJvcjogJyNjYXJkLXVybC1pbnB1dC1lcnJvcicsXG5cdFx0fSxcblx0XHRpbWFnZToge1xuXHRcdFx0bW9kYWw6ICcjaW1hZ2UtbW9kYWwnLFxuXHRcdFx0cHJldmlldzogJy5tb2RhbF9faW1hZ2UtcHJldmlldycsXG5cdFx0XHRjYXB0aW9uOiAnLm1vZGFsX19jYXB0aW9uJyxcblx0XHR9LFxuXHRcdGNsb3NlOiAnLm1vZGFsX19jbG9zZScsXG5cdFx0Zm9ybTogJy5tb2RhbF9fZm9ybScsXG5cdFx0aW5wdXQ6ICcubW9kYWxfX2lucHV0Jyxcblx0fSxcbn07XG5cbmV4cG9ydCBjb25zdCBjb25maWdWYWxpZGF0aW9uID0ge1xuXHRmb3JtU2VsZWN0b3I6ICcubW9kYWxfX2Zvcm0nLFxuXHRpbnB1dFNlbGVjdG9yOiAnLm1vZGFsX19pbnB1dCcsXG5cdHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLm1vZGFsX19idXR0b24nLFxuXHRpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnbW9kYWxfX2J1dHRvbl9kaXNhYmxlZCcsXG5cdGlucHV0RXJyb3JDbGFzczogJ21vZGFsX19pbnB1dF90eXBlX2Vycm9yJyxcblx0ZXJyb3JDbGFzczogJ21vZGFsX19lcnJvcl92aXNpYmxlJyxcbn07XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihcblx0c2VsZWN0b3JzLm1vZGFsLnByb2ZpbGVFZGl0Lm1vZGFsXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihcblx0c2VsZWN0b3JzLnByb2ZpbGUuZWRpdEJ1dHRvblxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihcblx0c2VsZWN0b3JzLm1vZGFsLnByb2ZpbGVFZGl0LnRpdGxlSW5wdXRcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHRzZWxlY3RvcnMubW9kYWwucHJvZmlsZUVkaXQuZGVzY3JpcHRpb25JbnB1dFxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wcm9maWxlLnRpdGxlKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihcblx0c2VsZWN0b3JzLnByb2ZpbGUuZGVzY3JpcHRpb25cbik7XG5cbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHRzZWxlY3RvcnMubW9kYWwuY2FyZEFkZC5tb2RhbFxuKTtcblxuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHRzZWxlY3RvcnMucHJvZmlsZS5hZGRCdXR0b25cbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG5cdHNlbGVjdG9ycy5tb2RhbC5mb3JtXG4pO1xuXG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEZvcm0gPSBhZGROZXdDYXJkTW9kYWwucXVlcnlTZWxlY3Rvcihcblx0c2VsZWN0b3JzLm1vZGFsLmZvcm1cbik7XG5cbiIsImltcG9ydCB7IGV2ZW50VHlwZSwgc2VsZWN0b3JzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2FwcC1kYXRhLmpzJztcblxuY2xhc3MgQ2FyZCB7XG5cdGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuXHRcdHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG5cdFx0dGhpcy5fdXJsID0gZGF0YS51cmw7XG5cdFx0dGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuXHRcdHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuXHR9XG5cblx0X2hhbmRsZUltYWdlUHJldmlldygpIHtcblx0XHRyZXR1cm4gdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl91cmwpO1xuXHR9XG5cblx0X3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXHRcdGNvbnN0IGxpa2VCdXR0b25FbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdHNlbGVjdG9ycy5jYXJkVGVtcGxhdGUubGlrZUJ1dHRvblxuXHRcdCk7XG5cdFx0bGlrZUJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUuQ0xJQ0ssICgpID0+IHtcblx0XHRcdHRoaXMuX2hhbmRsZUxpa2VCdXR0b24obGlrZUJ1dHRvbkVsZW1lbnQpO1xuXHRcdH0pO1xuXG5cdFx0Y29uc3QgZGVsZXRlQnV0dG9uRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHRzZWxlY3RvcnMuY2FyZFRlbXBsYXRlLmRlbGV0ZUJ1dHRvblxuXHRcdCk7XG5cdFx0ZGVsZXRlQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZS5DTElDSywgKCkgPT4ge1xuXHRcdFx0dGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKCk7XG5cdFx0fSk7XG5cblx0XHRjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0c2VsZWN0b3JzLmNhcmRUZW1wbGF0ZS5pbWFnZVxuXHRcdCk7XG5cdFx0aW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLkNMSUNLLCAoKSA9PlxuXHRcdFx0dGhpcy5faGFuZGxlSW1hZ2VQcmV2aWV3KClcblx0XHQpO1xuXHR9XG5cblx0Z2V0VmlldygpIHtcblx0XHR0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG5cdFx0XHQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG5cdFx0XHQuY29udGVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5jYXJkVGVtcGxhdGUuY2FyZClcblx0XHRcdC5jbG9uZU5vZGUodHJ1ZSk7XG5cblx0XHQvLyBhZGQgdGl0bGUgdG8gdGhlIGNhcmRcblx0XHR0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0c2VsZWN0b3JzLmNhcmRUZW1wbGF0ZS50aXRsZVxuXHRcdCkudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG5cdFx0Ly8gYWRkIGltYWdlIHRvIHRoZSBjYXJkXG5cblx0XHRjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0c2VsZWN0b3JzLmNhcmRUZW1wbGF0ZS5pbWFnZVxuXHRcdCk7XG5cdFx0aW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX3VybDtcblx0XHRpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcblxuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cdFx0cmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuXHR9XG5cblx0X2hhbmRsZUxpa2VCdXR0b24oZWxlbWVudCkge1xuXHRcdGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XG5cdH1cblx0X2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcblx0XHR0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcblx0XHR0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImltcG9ydCB7IGV2ZW50VHlwZSB9IGZyb20gJy4uL2NvbnN0YW50cy9hcHAtZGF0YS5qcyc7XG5cbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuXHRjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcblx0XHR0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3Rvcjtcblx0XHR0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuXHRcdHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuXHRcdHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcblx0XHR0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuXHRcdHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG5cdH1cblxuXHRfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcblx0XHRjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0YCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG5cdFx0KTtcblx0XHRjb25zb2xlLmxvZyhcIvCfmoAgfiBGb3JtVmFsaWRhdG9yIH4gX3Nob3dJbnB1dEVycm9yIH4gZXJyb3JFbGVtZW50OlwiLCBlcnJvckVsZW1lbnQpXG5cdFx0aW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblx0XHRlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG5cdFx0ZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG5cdH1cblxuXHRfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG5cdFx0Y29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuXHRcdCk7XG5cdFx0Y29uc29sZS5sb2coXCLwn5qAIH4gRm9ybVZhbGlkYXRvciB+IF9oaWRlSW5wdXRFcnJvciB+IGVycm9yRWxlbWVudDpcIiwgZXJyb3JFbGVtZW50KVxuXHRcdGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG5cdFx0ZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG5cdFx0ZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG5cdH1cblxuXHRfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG5cdFx0aWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG5cdFx0XHR0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG5cdFx0XHR0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuXHRcdFx0dGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbHMpIHtcblx0XHRyZXR1cm4gaW5wdXRFbHMuc29tZSgoaW5wdXRFbCkgPT4ge1xuXHRcdFx0Y29uc3QgaXNJbnB1dE5vdFZhbGlkID0gIWlucHV0RWwudmFsaWRpdHkudmFsaWQ7XG5cdFx0XHRyZXR1cm4gaXNJbnB1dE5vdFZhbGlkO1xuXHRcdH0pO1xuXHR9XG5cblx0X2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWwpIHtcblx0XHRjb25zdCBlcnJvckVsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG5cdFx0Y29uc3QgaXNJbnB1dFZhbGlkID0gaW5wdXRFbC52YWxpZGl0eS52YWxpZDtcblx0XHRpZiAoaXNJbnB1dFZhbGlkKSB7XG5cdFx0XHRpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblx0XHRcdGVycm9yRWwudGV4dENvbnRlbnQgPSAnJztcblx0XHRcdGVycm9yRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG5cdFx0XHRlcnJvckVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcblx0XHRcdGVycm9yRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcblx0XHR9XG5cdH1cblxuXHRfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG5cdFx0dGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcblx0XHRcdHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcilcblx0XHQpO1xuXHRcdHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0dGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3Jcblx0XHQpO1xuXG5cdFx0dGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuXHRcdFx0aW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLklOUFVULCAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eSh0aGlzLl9mb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcblx0XHRcdFx0dGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0ZW5hYmxlVmFsaWRhdGlvbigpIHtcblx0XHR0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZS5TVUJNSVQsIChldnQpID0+IHtcblx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblx0XHRcdGV2dC50YXJnZXQucmVzZXQoKTtcblx0XHR9KTtcblxuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cdH1cblxuXHRyZXNldFZhbGlkYXRpb24oKSB7XG5cdFx0dGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuXHRcdHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcblx0XHRcdHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG5cdFx0fSk7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImltcG9ydCB7IGV2ZW50VHlwZSwgc2VsZWN0b3JzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2FwcC1kYXRhLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuXHRjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuXHRcdHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG5cdFx0dGhpcy5fY2xvc2VCeUVzY2FwZUJ1dHRvbiA9IHRoaXMuX2Nsb3NlQnlFc2NhcGVCdXR0b24uYmluZCh0aGlzKTtcblx0XHR0aGlzLl9wb3B1cENsb3NlQnV0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdHNlbGVjdG9ycy5tb2RhbC5jbG9zZVxuXHRcdCk7XG5cdH1cblxuXHRvcGVuKCkge1xuXHRcdHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9vcGVuZWQnKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuXHRcdFx0ZXZlbnRUeXBlLktFWV9ET1dOLFxuXHRcdFx0dGhpcy5fY2xvc2VCeUVzY2FwZUJ1dHRvblxuXHRcdCk7XG5cdH1cblxuXHRjbG9zZSgpIHtcblx0XHR0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfb3BlbmVkJyk7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcblx0XHRcdGV2ZW50VHlwZS5LRVlfRE9XTixcblx0XHRcdHRoaXMuX2Nsb3NlQnlFc2NhcGVCdXR0b25cblx0XHQpO1xuXHR9XG5cblx0X2Nsb3NlQnlFc2NhcGVCdXR0b24gPSAoZSkgPT4ge1xuXHRcdGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9XG5cdH07XG5cblx0c2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG5cdFx0dGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLk1PVVNFX0RPV04sIChlKSA9PiB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdC8vcmVtb3ZlZCAnLicgaW4gZnJvbnQgb2YgdGFyZ2V0XG5cdFx0XHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWwnKSB8fFxuXHRcdFx0XHRlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX19jbG9zZScpXG5cdFx0XHQpIHtcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gdGhpcy5fcG9wdXBDbG9zZUJ1dG9uLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLkNMSUNLLCAoZSkgPT4ge1xuXHRcdC8vIFx0dGhpcy5jbG9zZSgpO1xuXHRcdC8vIH0pO1xuXHR9XG59XG4iLCJpbXBvcnQgeyBldmVudFR5cGUsIHNlbGVjdG9ycyB9IGZyb20gJy4uL2NvbnN0YW50cy9hcHAtZGF0YS5qcyc7XG5pbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG5cdGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcblx0XHRzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG5cdFx0dGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdHNlbGVjdG9ycy5tb2RhbC5mb3JtXG5cdFx0KTtcblx0XHR0aGlzLl9mb3JtSW5wdXRzID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcblx0XHRcdHNlbGVjdG9ycy5tb2RhbC5pbnB1dFxuXHRcdCk7XG5cdFx0dGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG5cdH1cblxuXHQvLyBjbG9zZSgpIHtcblx0XHRcblx0XHRcblx0Ly8gXHRzdXBlci5jbG9zZSgpO1xuXHQvLyB9XG5cblx0X2dldElucHV0VmFsdWVzKCkge1xuXHRcdGNvbnN0IGlucHV0cyA9IHt9O1xuXHRcdHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcblx0XHRcdGlucHV0c1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGlucHV0cztcblx0fVxuXG5cdF9zdWJtaXRGb3JtID0gKGUpID0+IHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0Y29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuXHRcdHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpO1xuXHR9O1xuXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xuXHRcdHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cdFx0dGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUuU1VCTUlULCB0aGlzLl9zdWJtaXRGb3JtKTtcblx0fVxufVxuIiwiaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcG91cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQge1xuXHRhZGROZXdDYXJkQnV0dG9uLFxuXHRhZGROZXdDYXJkRm9ybSxcblx0Y29uZmlnVmFsaWRhdGlvbixcblx0ZXZlbnRUeXBlLFxuXHRpbml0aWFsQ2FyZHMsXG5cdHByb2ZpbGVEZXNjcmlwdGlvbkVsZW0sXG5cdHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxuXHRwcm9maWxlRWRpdEJ1dHRvbixcblx0cHJvZmlsZUVkaXRGb3JtLFxuXHRwcm9maWxlVGl0bGVFbGVtLFxuXHRwcm9maWxlVGl0bGVJbnB1dCxcblx0c2VsZWN0b3JzLFxufSBmcm9tICcuLi9jb25zdGFudHMvYXBwLWRhdGEuanMnO1xuaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG5cdG5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZpbGUudGl0bGUsXG5cdGpvYlNlbGVjdG9yOiBzZWxlY3RvcnMucHJvZmlsZS5kZXNjcmlwdGlvbixcbn0pO1xuXG4vLyBTRUNUSU9OOiBDQVJEIExJU1RcblxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuXHR7XG5cdFx0aXRlbXM6IGluaXRpYWxDYXJkcyxcblx0XHRyZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XG5cdFx0XHRjb25zdCBjYXJkRWxlbWVudCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xuXHRcdFx0c2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcblx0XHR9LFxuXHR9LFxuXHRzZWxlY3RvcnMuZ2FsbGVyeS5saXN0XG4pO1xuXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRQcmV2aWV3Q2xpY2soY2FwdGlvbiwgaW1hZ2VVcmwpIHtcblx0Y2FyZFByZXZpZXdQb3B1cC5vcGVuKGNhcHRpb24sIGltYWdlVXJsKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuXHRjb25zdCBjYXJkID0gbmV3IENhcmQoXG5cdFx0Y2FyZERhdGEsXG5cdFx0c2VsZWN0b3JzLmNhcmRUZW1wbGF0ZS50ZW1wbGF0ZSxcblx0XHRoYW5kbGVDYXJkUHJldmlld0NsaWNrXG5cdCk7XG5cdHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuLy8gUE9QVVA6IFBST0ZJTEUgRURJVCBGT1JNXG5jb25zdCBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcblx0Y29uZmlnVmFsaWRhdGlvbixcblx0cHJvZmlsZUVkaXRGb3JtXG4pO1xuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuXHRzZWxlY3RvcnMubW9kYWwucHJvZmlsZUVkaXQubW9kYWwsXG5cdGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XG4pO1xuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xuXHRjb25zdCB7IG5hbWUsIGFib3V0IH0gPSBpbnB1dFZhbHVlcztcblx0dXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBqb2I6IGFib3V0IH0pO1xuXHRwcm9maWxlRWRpdFBvcHVwLmNsb3NlKCk7XG59XG5cbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLkNMSUNLLCBvcGVuRWRpdFByb2ZpbGVNb2RhbCk7XG5wcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5mdW5jdGlvbiBvcGVuRWRpdFByb2ZpbGVNb2RhbCgpIHtcblx0Y29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cdHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcblx0cHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBqb2I7XG5cdHByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcblx0cHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XG59XG5cbi8vIFBPUFVQOiBDQVJEIEFERCBGT1JNXG5jb25zdCBhZGROZXdDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuXHRjb25maWdWYWxpZGF0aW9uLFxuXHRhZGROZXdDYXJkRm9ybVxuKTtcblxuY29uc3QgYWRkTmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG5cdHNlbGVjdG9ycy5tb2RhbC5jYXJkQWRkLm1vZGFsLFxuXHRoYW5kbGVOZXdDYXJkU3VibWl0XG4pO1xuXG5mdW5jdGlvbiBoYW5kbGVOZXdDYXJkU3VibWl0KGlucHV0VmFsdWVzKSB7XG5cdGNvbnN0IHsgbmFtZSwgdXJsIH0gPSBpbnB1dFZhbHVlcztcblx0Y29uc3QgbmV3RWxlbWVudERhdGEgPSByZW5kZXJDYXJkKHsgbmFtZSwgdXJsIH0pO1xuXHRzZWN0aW9uLmFkZEl0ZW0obmV3RWxlbWVudERhdGEpO1xuXHRhZGROZXdDYXJkUG9wdXAuY2xvc2UoKTtcbn1cblxuYWRkTmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLkNMSUNLLCBvcGVuQ2FyZEFkZE1vZGFsKTtcbmFkZE5ld0NhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuZnVuY3Rpb24gb3BlbkNhcmRBZGRNb2RhbCgpIHtcblx0YWRkTmV3Q2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG5cdGFkZE5ld0NhcmRQb3B1cC5vcGVuKCk7XG59XG5cbi8vIFBPUFVQOiBJTUFHRSBQUkVWSUVXXG5jb25zdCBjYXJkUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5tb2RhbC5pbWFnZS5tb2RhbCk7XG5jYXJkUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iLCJpbXBvcnQgeyBzZWxlY3RvcnMgfSBmcm9tICcuLi9jb25zdGFudHMvYXBwLWRhdGEnO1xuXG5jbGFzcyBVc2VySW5mbyB7XG5cdGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG5cdFx0dGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG5cdFx0dGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuXHR9XG5cblx0Z2V0VXNlckluZm8oKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuXHRcdFx0am9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuXHRcdH07XG5cdH1cblxuXHRzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XG5cdFx0dGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuXHRcdHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG4iLCJjbGFzcyBTZWN0aW9uIHtcblx0Y29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZENvbnRhaW5lclNlbGVjdG9yKSB7XG5cdFx0dGhpcy5faXRlbXMgPSBpdGVtcztcblx0XHR0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuXG5cdFx0dGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkQ29udGFpbmVyU2VsZWN0b3IpO1xuXHR9XG5cblx0cmVuZGVySXRlbXMoKSB7XG5cdFx0dGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0dGhpcy5fcmVuZGVyZXIoaXRlbSk7XG5cdFx0fSk7XG5cdH1cblxuXHRhZGRJdGVtKGVsZW1lbnQpIHtcblx0XHR0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIiwiaW1wb3J0IHsgc2VsZWN0b3JzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2FwcC1kYXRhLmpzJztcbmltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG5cdGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcblx0XHRzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG5cdFx0dGhpcy5fcHJldmlld0ltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdHNlbGVjdG9ycy5tb2RhbC5pbWFnZS5jYXB0aW9uXG5cdFx0KTtcblx0XHR0aGlzLl9wcmV2aWV3SW1hZ2VNb2RhbCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0c2VsZWN0b3JzLm1vZGFsLmltYWdlLnByZXZpZXdcblx0XHQpO1xuXHR9XG5cblx0b3BlbihjYXB0aW9uLCBpbWFnZVVybCkge1xuXHRcdHRoaXMuX3ByZXZpZXdJbWFnZU1vZGFsLnNyYyA9IGltYWdlVXJsO1xuXHRcdHRoaXMuX3ByZXZpZXdJbWFnZU1vZGFsLmFsdCA9IGNhcHRpb247XG5cdFx0dGhpcy5fcHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBjYXB0aW9uO1xuXHRcdHN1cGVyLm9wZW4oKTtcblx0fVxufVxuIl0sIm5hbWVzIjpbImV2ZW50VHlwZSIsInNlbGVjdG9ycyIsImNvbnRhaW5lciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwibGlzdCIsInRlbXBsYXRlIiwiY2FyZCIsImltYWdlIiwiZGVsZXRlQnV0dG9uIiwiaW5mbyIsImxpa2VCdXR0b24iLCJwcm9maWxlRWRpdCIsIm1vZGFsIiwidGl0bGVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJ0aXRsZUlucHV0RXJyb3IiLCJkZXNjcmlwdGlvbklucHV0RXJyb3IiLCJjYXJkQWRkIiwidXJsSW5wdXRFcnJvciIsInByZXZpZXciLCJjYXB0aW9uIiwiY2xvc2UiLCJmb3JtIiwiaW5wdXQiLCJjb25maWdWYWxpZGF0aW9uIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwcm9maWxlRWRpdE1vZGFsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiYWRkTmV3Q2FyZE1vZGFsIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsInByb2ZpbGVFZGl0Rm9ybSIsImFkZE5ld0NhcmRGb3JtIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfdXJsIiwidXJsIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUltYWdlUHJldmlldyIsIl9zZXRFdmVudExpc3RlbmVycyIsImxpa2VCdXR0b25FbGVtZW50IiwiX2NhcmRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsImdldFZpZXciLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidGV4dENvbnRlbnQiLCJpbWFnZUVsZW1lbnQiLCJzcmMiLCJhbHQiLCJlbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJhZGQiLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsIl9idXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJpbnB1dEVscyIsInNvbWUiLCJpbnB1dEVsIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJmb3JtRWwiLCJlcnJvckVsIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsInJlc2V0IiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCeUVzY2FwZUJ1dHRvbiIsImJpbmQiLCJfcG9wdXBDbG9zZUJ1dG9uIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfZm9ybUlucHV0cyIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwidmFsdWUiLCJfc3VibWl0Rm9ybSIsImlucHV0VmFsdWVzIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwic2VjdGlvbiIsImNhcmRDb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJjYXJkRGF0YSIsImNhcmRFbGVtZW50IiwicmVuZGVyQ2FyZCIsImhhbmRsZUNhcmRQcmV2aWV3Q2xpY2siLCJpbWFnZVVybCIsImNhcmRQcmV2aWV3UG9wdXAiLCJDYXJkIiwicHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsInByb2ZpbGVFZGl0UG9wdXAiLCJhYm91dCIsImFkZE5ld0NhcmRGb3JtVmFsaWRhdG9yIiwiYWRkTmV3Q2FyZFBvcHVwIiwibmV3RWxlbWVudERhdGEiLCJfcHJldmlld0ltYWdlVGl0bGUiLCJfcHJldmlld0ltYWdlTW9kYWwiXSwic291cmNlUm9vdCI6IiJ9